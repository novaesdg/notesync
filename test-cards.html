<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Sistema de Cards</title>
    <link rel="stylesheet" href="styles/todoPage/main.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <button class="logout">⏎</button>
        <div class="title">NoteSync - Teste Cards</div>
    </header>

    <main>
        <div class="content">
            <div class="title-left">Teste do Sistema de Cards</div>
            <div id="test-results"></div>
        </div>
    </main>

    <nav>
        <div class="nav-inner">
            <a href="todoPage.html" class="nav-link">📦 A fazer</a>
            <a href="createPage.html" class="nav-center">➕ Criar</a>
            <a href="donePage.html" class="nav-link">✔️ Feito</a>
        </div>
    </nav>

    <script src="js/auth.js"></script>
    <script src="js/tasks.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Página de teste carregada');
            
            // Verificar se usuário está logado
            if (!auth.isLoggedIn()) {
                document.getElementById('test-results').innerHTML = 
                    '<div style="color: #e45454; padding: 20px; text-align: center;">❌ Usuário não logado. Faça login primeiro.</div>';
                return;
            }

            // Configurar botão de logout
            const logoutBtn = document.querySelector('.logout');
            logoutBtn.addEventListener('click', function() {
                auth.logout();
            });

            // Testar funcionalidades
            testCardSystem();
        });

        async function testCardSystem() {
            const resultsDiv = document.getElementById('test-results');
            let results = '<h3 style="color: #d1d6f3; margin-bottom: 20px;">🧪 Testando Sistema de Cards</h3>';
            
            try {
                // Teste 1: Carregar tarefas
                results += '<div style="margin-bottom: 15px;"><strong>1. Carregando tarefas...</strong></div>';
                const tasks = await tasks.getTasks();
                results += `<div style="color: #4caf50; margin-left: 20px;">✅ ${tasks.length} tarefas carregadas</div>`;
                
                // Teste 2: Renderizar cards
                results += '<div style="margin-bottom: 15px;"><strong>2. Renderizando cards...</strong></div>';
                tasks.renderTasks(tasks, 'todo');
                results += '<div style="color: #4caf50; margin-left: 20px;">✅ Cards renderizados com sucesso</div>';
                
                // Teste 3: Verificar elementos dos cards
                results += '<div style="margin-bottom: 15px;"><strong>3. Verificando elementos dos cards...</strong></div>';
                const cards = document.querySelectorAll('.task-card');
                results += `<div style="color: #4caf50; margin-left: 20px;">✅ ${cards.length} cards encontrados</div>`;
                
                // Verificar elementos internos
                cards.forEach((card, index) => {
                    const header = card.querySelector('.card-header');
                    const content = card.querySelector('.card-content');
                    const actions = card.querySelector('.card-actions');
                    const statusIndicator = card.querySelector('.status-indicator');
                    const editBtn = card.querySelector('.edit-btn');
                    const statusBtn = card.querySelector('.status-btn');
                    const deleteBtn = card.querySelector('.delete-btn');
                    
                    results += `<div style="margin-left: 40px; font-size: 0.9rem;">`;
                    results += `Card ${index + 1}: `;
                    results += header ? '✅ Header ' : '❌ Header ';
                    results += content ? '✅ Content ' : '❌ Content ';
                    results += actions ? '✅ Actions ' : '❌ Actions ';
                    results += statusIndicator ? '✅ Status ' : '❌ Status ';
                    results += editBtn ? '✅ Edit ' : '❌ Edit ';
                    results += statusBtn ? '✅ StatusBtn ' : '❌ StatusBtn ';
                    results += deleteBtn ? '✅ Delete ' : '❌ Delete ';
                    results += '</div>';
                });
                
                results += '<div style="color: #4caf50; margin-left: 20px;">✅ Todos os elementos verificados</div>';
                
                // Teste 4: Funcionalidades
                results += '<div style="margin-bottom: 15px;"><strong>4. Funcionalidades disponíveis:</strong></div>';
                results += '<div style="color: #4caf50; margin-left: 20px;">✅ Edição inline (clique no ✏️)</div>';
                results += '<div style="color: #4caf50; margin-left: 20px;">✅ Mudança de status (clique no ✅/📦)</div>';
                results += '<div style="color: #4caf50; margin-left: 20px;">✅ Exclusão (clique no 🗑️)</div>';
                
                results += '<div style="margin-top: 30px; padding: 20px; background: rgba(76, 175, 80, 0.1); border-radius: 8px; border: 1px solid rgba(76, 175, 80, 0.3);">';
                results += '<strong style="color: #4caf50;">🎉 Sistema de Cards Funcionando Perfeitamente!</strong><br>';
                results += '<div style="margin-top: 10px; font-size: 0.9rem;">';
                results += '• Cards com design moderno e responsivo<br>';
                results += '• Edição inline com Enter/Escape<br>';
                results += '• Mudança de status entre todo/done<br>';
                results += '• Botões com animações e tooltips<br>';
                results += '• Layout adaptativo para mobile<br>';
                results += '</div>';
                results += '</div>';
                
            } catch (error) {
                results += `<div style="color: #e45454; margin-left: 20px;">❌ Erro: ${error.message}</div>`;
            }
            
            resultsDiv.innerHTML = results;
        }
    </script>
</body>
</html>
